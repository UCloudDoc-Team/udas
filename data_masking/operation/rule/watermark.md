# 4、数据水印

## 4.1 数据水印溯源

如果发现数据有泄露的情况，可以在此模块对疑似泄露数据进行溯源操作。

### 4.1.1 添加

点击“添加”按钮，在添加自定义水印溯源任务页面输入任务名称、选择水印数据库、填入样本数、选择匹配率和表量。溯源方式有手动溯源和自动溯源两种方式。自动溯源只需要选择需要溯源的表之后，点击完成即可，如下图所示。    ![](/images/operation/rule/watermark/watermark_1.png)                         

在添加任务页面中填写如下各项配置配置信息：

| 任务名称   | test                           |
| ---------- | ------------------------------ |
| 水印数据库 | 选择源数据库中有水印表的数据库 |
| 样本数     | 100                            |
| 匹配率     | 100%                           |
| 溯源模式   | 自动溯源（默认）               |
| 选择表     | 选择所有的表                   |

水印数据库：点击  按钮对水印数据库进行选择

样本数：根据数据量的大小进行选择，如果样本数选择太少会导致溯源出来的匹配率较低

溯源模式：目前支持自动溯源和手动溯源。

自动溯源：对要溯源的表选择即可；

手动溯源：需要对表字段选择指定的水印规则，效率较高。

完成各项配置之后点击“完成”即完成溯源任务的添加。点击操作栏的  按钮即可执行任务，溯源任务不需要审核。

​      ![](/images/operation/rule/watermark/watermark_2.png)

### 4.1.2.查看任务详情

执行任务完成后，即可点击右侧操作栏中的  ，在溯源任务详情中可查看到整个任务的执行情况、溯源结果等信息。 

​      ![](/images/operation/rule/watermark/watermark_3.png)

### 4.1.3 修改和删除

当水印溯源任务没有进行的时候任务才可以修改，点击修改按钮即可跳转到水印溯源任务修改页面，修改项除了任务名称不可修改外，其余信息均可以进行修改。

![](/images/operation/rule/watermark/watermark_4.png) 

## 4.2 文件水印溯源

此模块可对带有水印的excel数据进行溯源。

### 4.2.1 添加

点击“添加”按钮，在弹窗内添加水印任务。 ![](/images/operation/rule/watermark/watermark_5.png)

填入下列信息之后点击“保存”，保存后即可执行：

| 任务名   | Test99（自定义，32字符以内） |
| -------- | ---------------------------- |
| 上传文件 | 文件（一次只能上传一个文件） |
| 主键     | id                           |
| 水印列   | 已打水印的列名               |
| 水印类型 | 列名对应的水印类型           |

a. 上传文件：目前系统仅支持excel文件类型的溯源；

b. 水印类型：目前就支持字符水印和数字水印两种。

### 4.2.2 查看任务详情

执行任务完成后，即可点击右侧操作栏中的  ，在溯源任务详情中查看到水印规则匹配率以及详细说明。

![](/images/operation/rule/watermark/watermark_6.png)

### 4.2.3 删除和修改

当水印溯源任务没有进行的时候任务才可以修改，点击修改按钮即可跳转到水印溯源任务修改页面，修改项除了任务名称不可修改外，其余信息均可以进行修改。

![](/images/operation/rule/watermark/watermark_7.png)

删除即选中需要删除的水印溯源任务，点击按钮删除即可。
